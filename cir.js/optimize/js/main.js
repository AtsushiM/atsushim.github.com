(function(){var b,d=C.$;b=C.klass({extend:C.Event,prop:{createjssrc:"a",srccreatestart:"b",srcloaded:"c"}});b={observer:new C.Observer,e:new b,el:new function(){return{check_all:d("#all"),btn_create:d("#create"),srcs:d("#srcfile input"),srcarea:d("#srcarea")}},dependency:new function(){return{active:{selector_methods:["selector"],selector_methods_animate:["selector","selector_methods","Tweener","Animation"],ExternalInterface:["HashQuery","ExternalInterface_Android","ExternalInterface_IOS"],ExternalInterface_Android:["HashQuery",
"ExternalInterface"],ExternalInterface_IOS:["HashQuery","ExternalInterface"],Audio:["Embed"],Sound:["Embed","Media","Audio"],Video:["Embed"],Movie:["Embed","Media","Video"],Media:["Embed","Audio","Video"],LocalStorage:["WebStorage"],SessionStorage:["WebStorage"],DeviceMotion:["DeviceAction"],DeviceOrientation:["DeviceAction"],DeviceShake:["DeviceAction","DeviceMotion","DeviceOrientation"],View:["selector","selector_methods"],Model:["selector","DataStore","Observer"]},passive:{selector:["selector_methods",
"selector_methods_animate","View"],selector_methods:["selector_methods_animate","View"],DataStore:["Model"],Observer:["Model"],HashQuery:["ExternalInterface","ExternalInterface_Android","ExternalInterface_IOS"],ExternalInterface:["ExternalInterface_Android","ExternalInterface_IOS"],Tweener:["selector_methods_animate"],Embed:["Audio","Video","Media","Sound","Movie"],Media:["Audio","Video","Sound","Movie"],Audio:["Sound"],Video:["Movie"],WebStorage:["LocalStorage","SessionStorage"],DeviceAction:["DeviceMotion",
"DeviceOrientation","DeviceShake"],DeviceMotion:["DeviceShake"],DeviceOrientation:["DeviceShake"]},waste:{ExternalInterface:["ExternalInterface_Android","ExternalInterface_IOS"],Media:["Audio","Video","Sound","Movie"],DeviceAction:["DeviceMotion","DeviceOrientation","DeviceShake"]}}},ajax:new function(){return{jssrc:function(a){(new C.Ajax).request({url:a.src+"?update="+Date.now(),callback:function(c){a.result[a.src]=c;a.callback()}})},closurecompiler:function(a){var c=new C.Ajax,g="",g="compilation_level=ADVANCED_OPTIMIZATIONS&output_format=text&output_info=compiled_code&&js_code="+
a.src;c.request({url:"http://closure-compiler.appspot.com/compile",type:"POST",query:g,callback:function(c){a.callback(c)}})}}}};b.makeSrc=new function(a){var c=a.e,g=a.observer,b=a.ajax,e=a.el,f={make:function(a){for(var f="",d=0,j=e.srcs.length,k;d<j;d++)k=e.srcs[d].value,a[k]&&(f+=encodeURIComponent(a[k]));b.closurecompiler({src:f,callback:function(e){g.fire(c.createjssrc,a["src/clouser_start.js"]+e+a["src/clouser_end.js"])}});return f}};g.on(c.srcloaded,function(a){console.log(a);f.make(a)});
return f}(b);b.btnCreate=new function(a){var c=a.e,g=a.observer,b=a.ajax,e=a.el,f={requestJS:function(){var a=0,d=0,n=e.srcs.length,j={},k=function(){d--;0===d&&(console.log(d),g.fire(c.srcloaded,j))};g.fire(c.srccreatestart,j);for(f.unbind();a<n;a++)e.srcs[a].checked&&(d++,b.jssrc({src:e.srcs[a].value,result:j,callback:k}))},unbind:function(){e.btn_create.attr("value","request...");return e.btn_create.off(C.e.CLICK,f.requestJS)},bind:function(){e.btn_create.attr("value","Create.");return e.btn_create.on(C.e.CLICK,
f.requestJS)}};f.bind();g.on(c.createjssrc,function(){f.bind()});return f}(b);b.chkAll=new function(a){var c=a.el;a={toggle:function(){var a=0,b=c.srcs.length,e="checked";for(c.check_all[0].checked||(e="");a<b;a++)c.srcs[a].disabled||(c.srcs[a].checked=e)}};c.check_all.on(C.e.CLICK,a.toggle);return a}(b);b.chkSrc=new function(a){var c=a.dependency,b,h={checkDependency:function(){var a=d(this).parent().parent(),f="passive",m=c.waste,l;this.checked&&(f="active");(b=c[f][a[0].id])&&h.setDependency(b,
this.checked);if(!this.checked)for(l in m){f=!0;for(a=m[l].length;a--;)if(d("#"+m[l][a]+" input")[0].checked){f=!1;break}f&&(d("#"+l+" input")[0].checked=!1)}},setDependency:function(a,c){for(var b=0,g=a.length;b<g;b++)d("#"+a[b]+" input")[0].checked=c}};a.el.srcs.on(a.e.CHANGE,h.checkDependency);return h}(b);b.srcArea=new function(a){var b=a.e,d=a.observer,h=a.el,e={setValue:function(a){h.srcarea[0].value=a},loading:function(){e.setValue("Now Create...")}};d.on(b.createjssrc,e.setValue);d.on(b.srccreatestart,
e.loading);return e}(b)})();
