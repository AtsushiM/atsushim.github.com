(function(){function j(a){a[0]&&(a.addClass(d),f.set(a.attr("id"),1))}function k(a){a[0]&&(a.removeClass(d),f.remove(a.attr("id")))}function g(a){a[0]&&(a.addClass(e),h.set(a.attr("id"),1))}var b={},c=C.$,d="close",e="open",f=new C.LocalStorage({namespace:d}),h=new C.LocalStorage({namespace:e});b.init=function(){var a=f.get(),l=h.get(),b=location.hash.split("#")[1],d;for(d in a)j(c("#"+d));b&&g(c("#"+b));for(d in l)g(c("#"+d))};b.localLink=function(){return c('a[href^="#"]').on(C.event.click,function(){k(c(c(this).attr("href")))})};
b.submenu=function(){function a(){var a=this.innerHeight,b=c("#sub");b[0].offsetHeight+b[0].offsetTop>a?b.css({position:"static"}):b.css({position:"fixed"})}c("#sub");c("#footer");c(window).on(C.event.resize,a);c(window).on(C.event.load,a)};b.toggle=function(){var a=c("#main");a.find("dt").on(C.event.click,function(){var a=c(this).parent();return a.hasClass(d)?k(a):j(a)});a.find("h3").on(C.event.click,function(){var a=c(this).parent();if(!a.hasClass(e))return g(a);a[0]&&(a.removeClass(e),h.remove(a.attr("id")))})};
b.init();b.localLink();b.submenu();b.toggle()})();
